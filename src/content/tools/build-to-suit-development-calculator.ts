import { CalculatorContent } from "@/types";

export const BUILD_TO_SUIT_DEVELOPMENT_CALCULATOR_CONTENT: CalculatorContent = {
  title: "Build-to-Suit Development Calculator",
  description: "Analyze build-to-suit development projects with construction costs, tenant lease analysis, and developer returns.",
  icon: "Icon",
  category: "Real Estate",
  slug: "build-to-suit-development-calculator",
  article: {
    title: "Build-to-Suit Development Calculator - Custom Development Project Analysis",
    content: `
    A build-to-suit development calculator helps developers and investors analyze custom-built commercial properties for specific tenants with long-term lease commitments.

    ### What is Build-to-Suit Development?

    Build-to-suit (BTS) is a real estate development strategy where:

    - **Developer builds specifically for one tenant**
    - **Tenant signs long-term lease (10-25 years)** before construction
    - **Property customized to tenant specifications**
    - **Developer retains ownership**, tenant pays rent
    - **Common in:** Office, industrial, retail, medical

    ### Benefits for Developers

    **Reduced Risk:**
    - Pre-leased before construction starts
    - Long-term cash flow secured
    - Credit tenant often provides rent guarantees

    **Better Financing:**
    - Lenders prefer pre-leased projects
    - Higher leverage possible (75-80% LTV)
    - Lower interest rates
    - Construction and permanent financing easier

    **Higher Returns:**
    - Development margin: 10-20%+
    - Long-term stable income
    - Potential sale to REIT or institution
    - Triple net leases common (low expenses)

    ### Benefits for Tenants

    **Customization:**
    - Building designed to exact specifications
    - Optimal layout for operations
    - Future expansion options
    - Location selection control

    **Predictable Costs:**
    - Fixed rent for long term
    - Known escalations
    - No surprise capital expenses (landlord responsible)

    **No Capital Requirement:**
    - Don't tie up capital in real estate
    - Preserve credit lines for business
    - Balance sheet advantages

    ### Build-to-Suit Project Types

    **Corporate Headquarters**
    - Large footprint (50,000 - 300,000 SF)
    - High-quality finishes
    - Campus settings
    - 15-20 year leases
    - Examples: Tech companies, insurance firms

    **Distribution/Logistics**
    - 200,000 - 1,000,000+ SF
    - Specific dock configurations
    - Ceiling height requirements
    - Heavy power and automation
    - 15-20 year leases
    - Examples: Amazon, FedEx, 3PLs

    **Retail (Big Box/Grocery)**
    - 20,000 - 150,000 SF
    - Specific layouts and fixtures
    - Strategic locations
    - 15-25 year leases
    - Examples: Target, Whole Foods, CVS

    **Medical/Healthcare**
    - 15,000 - 100,000 SF
    - Specialized systems (HVAC, imaging)
    - Proximity to hospitals
    - 10-15 year leases
    - Examples: Surgical centers, dialysis clinics

    **Manufacturing**
    - Variable sizes
    - Heavy power and utilities
    - Specialized equipment
    - 15-20 year leases
    - Examples: Food processing, light assembly

    ### Key Project Components

    **Land Acquisition**
    - Site must meet tenant requirements
    - Zoning and entitlements
    - Utilities availability
    - Traffic access
    - Typically 15-25% of total cost

    **Hard Costs (Construction)**
    - Building shell
    - Tenant improvements
    - Site work and parking
    - Utilities and infrastructure
    - Typically 60-70% of total cost

    **Soft Costs**
    - Architecture and engineering (2-4%)
    - Legal and closing costs (1-2%)
    - Development fees (2-3%)
    - Financing costs (2-4%)
    - Permits and impact fees (1-3%)
    - Typically 10-15% of total cost

    ### Lease Structure (Typical)

    **Lease Terms:**
    - Initial term: 15-20 years
    - Renewal options: 2-4 periods of 5 years each
    - Triple net (NNN) structure most common
    - Rent escalations: 2-3% annually or 10% every 5 years

    **Rent Calculation:**
    Based on total development cost:
    - Land + Construction + Soft Costs = Total Cost
    - Rent = Total Cost ร (Cap Rate + Developer Spread)
    - Typical: 7-9% of total development cost

    **Tenant Responsibilities (NNN):**
    - Property taxes
    - Building insurance
    - All maintenance and repairs
    - Utilities
    - Capital expenditures

    ### Development Timeline

    **Pre-Development (3-6 months):**
    - Site selection and due diligence
    - Tenant lease negotiation
    - Schematic design
    - Entitlements and permits
    - Financing arrangement

    **Design & Permitting (4-8 months):**
    - Architectural design
    - Engineering
    - Permit applications
    - Final cost estimates
    - Lease execution

    **Construction (8-18 months):**
    - Site work
    - Building construction
    - Tenant improvements
    - Inspections and certificate of occupancy

    **Total Timeline: 15-32 months** from site acquisition to tenant move-in

    ### Financial Metrics

    **Development Yield:**
    NOI รท Total Development Cost
    - Target: 7-10% depending on market and risk
    - Higher for secondary markets
    - Lower for credit tenants in prime locations

    **Profit on Cost:**
    (Stabilized Value - Total Cost) รท Total Cost
    - Target: 15-25%
    - Higher for riskier projects
    - Market dependent

    **Return on Equity (ROE):**
    Annual cash flow รท Equity invested
    - Target: 12-20%+

    **IRR (Including Sale):**
    Time-weighted return over hold period
    - Target: 15-25%
    - Assumes sale after stabilization or at year 10

    ### Financing Build-to-Suit Projects

    **Construction Loan:**
    - 70-80% of cost
    - Interest-only during construction
    - 18-24 month term
    - Rates: Prime + 2-3%
    - Tenant lease creditworthiness critical

    **Permanent Financing:**
    - 70-75% LTV
    - Converts from construction loan
    - 10-25 year terms
    - Rates based on tenant credit
    - CMBS, life companies, banks

    **Developer Equity:**
    - 20-30% of total cost
    - Can include land value
    - May syndicate with investors
    - Potential preferred return structure

    ### Risk Factors

    **Construction Risk:**
    - Cost overruns
    - Timeline delays
    - Material price escalation
    - Labor shortages
    - Weather delays

    **Tenant Credit Risk:**
    - Business failure
    - Bankruptcy
    - Lease default
    - Perform tenant credit analysis

    **Market Risk:**
    - Changing demand
    - Rental rate shifts
    - Cap rate expansion (lower value)
    - Exit strategy challenges

    **Specialized Building Risk:**
    - Limited alternative uses
    - Difficult to re-lease if tenant leaves
    - May require significant capital to convert

    ### Due Diligence Requirements

    **Tenant Analysis:**
    - Financial statements (3-5 years)
    - Credit reports and D&B rating
    - Industry and business outlook
    - Management team quality
    - Lease guarantee (corporate vs. subsidiary)

    **Site Due Diligence:**
    - Phase I & II environmental
    - Geotechnical survey
    - Topographic survey
    - Utility availability
    - Traffic study
    - Wetlands and endangered species

    **Entitlements:**
    - Zoning compliance
    - Building permits
    - Impact fees
    - Signage approvals
    - Access and curb cuts

    ### Exit Strategies

    **Hold for Income:**
    - Collect rent for 10-20 years
    - Refinance to pull out equity
    - Stable, predictable cash flow

    **Sale to Institutional Investor:**
    - REITs buy stabilized BTS properties
    - Sale-leaseback potential
    - Cap rates: 5-7% for credit tenants
    - Maximize value 1-2 years after completion

    **1031 Exchange:**
    - Defer capital gains taxes
    - Exchange into multiple properties
    - Step up in property quality

    ### Value-Add Opportunities

    **During Development:**
    - Value engineering (reduce costs without sacrificing quality)
    - Fast-track construction (reduce carrying costs)
    - Negotiate favorable lease terms

    **After Completion:**
    - Add pad sites or outlots
    - Expand parking for fees
    - Roof leases (solar, cellular)
    - Land lease adjacent parcels

    ### Common Mistakes to Avoid

    **Inadequate Contingency:**
    - Budget 5-10% for construction contingency
    - Soft cost contingency
    - Timeline contingency

    **Over-Customization:**
    - Balance tenant needs with future re-leasing ability
    - Avoid single-purpose design if possible
    - Consider alternative uses

    **Weak Lease Terms:**
    - Ensure adequate rent coverage
    - Include demolition and restoration clauses
    - Limit tenant termination rights
    - Get strong corporate guarantee

    **Under-Capitalized:**
    - Maintain reserves for delays and overruns
    - Don't over-leverage
    - Plan for 6-12 month absorption if tenant delays

    ### How This Calculator Works

    This calculator analyzes:

    1. **Total Development Cost:** Land + hard costs + soft costs
    2. **Annual Rent:** Based on development cost and targeted yield
    3. **Net Operating Income:** Rent minus operating expenses
    4. **Annual Cash Flow:** After debt service
    5. **Development Metrics:** Yield on cost, profit on cost, cash-on-cash return
    6. **Project Feasibility:** Break-even analysis and returns

    Use this calculator to underwrite build-to-suit development opportunities, negotiate tenant lease terms, and evaluate project feasibility before committing to development.
  `,
  },
  calculator: {
    fields: [
      {
        name: "landCost",
        label: "Land Acquisition Cost",
        type: "number",
        defaultValue: "2000000",
      },
      {
        name: "buildingSize",
        label: "Building Size (Square Feet)",
        type: "number",
        defaultValue: "100000",
      },
      {
        name: "hardCostPerSF",
        label: "Hard Construction Cost (per SF)",
        type: "number",
        defaultValue: "85",
      },
      {
        name: "siteworkCosts",
        label: "Sitework & Parking",
        type: "number",
        defaultValue: "800000",
      },
      {
        name: "architecturalFees",
        label: "Architectural & Engineering Fees (%)",
        type: "number",
        defaultValue: "3",
      },
      {
        name: "legalClosingCosts",
        label: "Legal & Closing Costs",
        type: "number",
        defaultValue: "150000",
      },
      {
        name: "permitsFees",
        label: "Permits & Impact Fees",
        type: "number",
        defaultValue: "250000",
      },
      {
        name: "developmentFee",
        label: "Development Fee (%)",
        type: "number",
        defaultValue: "2.5",
      },
      {
        name: "constructionPeriod",
        label: "Construction Period (Months)",
        type: "number",
        defaultValue: "14",
      },
      {
        name: "constructionInterestRate",
        label: "Construction Loan Interest Rate (%)",
        type: "number",
        defaultValue: "8",
      },
      {
        name: "annualRentPerSF",
        label: "Annual Rent per SF",
        type: "number",
        defaultValue: "12",
      },
      {
        name: "leaseType",
        label: "Lease Type (0=Gross, 1=NNN)",
        type: "number",
        defaultValue: "1",
      },
      {
        name: "operatingExpenses",
        label: "Annual Operating Expenses (if Gross lease)",
        type: "number",
        defaultValue: "0",
      },
      {
        name: "equityInvestment",
        label: "Developer Equity Investment",
        type: "number",
        defaultValue: "3500000",
      },
      {
        name: "permanentLoanRate",
        label: "Permanent Loan Interest Rate (%)",
        type: "number",
        defaultValue: "7",
      },
      {
        name: "permanentLoanTerm",
        label: "Permanent Loan Term (Years)",
        type: "number",
        defaultValue: "25",
      },
    ],
    results: [
      { label: "Hard Construction Costs", isCurrency: true },
      { label: "Total Soft Costs", isCurrency: true },
      { label: "Construction Period Interest", isCurrency: true },
      { label: "Total Development Cost", isCurrency: true },
      { label: "Cost per Square Foot", isCurrency: true },
      { label: "Annual Gross Rent", isCurrency: true },
      { label: "Net Operating Income (NOI)", isCurrency: true },
      { label: "Permanent Loan Amount", isCurrency: true },
      { label: "Annual Debt Service", isCurrency: true },
      { label: "Annual Cash Flow", isCurrency: true },
      { label: "Development Yield on Cost", isCurrency: false },
      { label: "Cash-on-Cash Return", isCurrency: false },
      { label: "Stabilized Value (at market cap rate 7%)", isCurrency: true },
      { label: "Profit on Cost", isCurrency: false },
    ],
    calculate: (values) => {
      const {
        landCost, buildingSize, hardCostPerSF, siteworkCosts,
        architecturalFees, legalClosingCosts, permitsFees, developmentFee,
        constructionPeriod, constructionInterestRate,
        annualRentPerSF, leaseType, operatingExpenses,
        equityInvestment, permanentLoanRate, permanentLoanTerm
      } = values;
      
      const hardConstructionCosts = (buildingSize * hardCostPerSF) + siteworkCosts;
      const preliminaryCost = landCost + hardConstructionCosts;
      const archEngineeringFees = preliminaryCost * (architecturalFees / 100);
      const devFee = preliminaryCost * (developmentFee / 100);
      const totalSoftCosts = archEngineeringFees + legalClosingCosts + permitsFees + devFee;
      
      const costBeforeInterest = landCost + hardConstructionCosts + totalSoftCosts;
      const averageLoanBalance = costBeforeInterest * 0.75 * 0.5;
      const constructionInterest = averageLoanBalance * (constructionInterestRate / 100) * (constructionPeriod / 12);
      
      const totalDevelopmentCost = costBeforeInterest + constructionInterest;
      const costPerSF = totalDevelopmentCost / buildingSize;
      
      const annualGrossRent = buildingSize * annualRentPerSF;
      const noi = leaseType === 1 ? annualGrossRent : annualGrossRent - operatingExpenses;
      
      const permanentLoanAmount = totalDevelopmentCost - equityInvestment;
      const monthlyRate = permanentLoanRate / 100 / 12;
      const numberOfPayments = permanentLoanTerm * 12;
      const monthlyPayment = permanentLoanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
      const annualDebtService = monthlyPayment * 12;
      
      const annualCashFlow = noi - annualDebtService;
      const developmentYield = (noi / totalDevelopmentCost) * 100;
      const cashOnCashReturn = (annualCashFlow / equityInvestment) * 100;
      
      const marketCapRate = 0.07;
      const stabilizedValue = noi / marketCapRate;
      const profitOnCost = ((stabilizedValue - totalDevelopmentCost) / totalDevelopmentCost) * 100;

      return [
        { label: "Hard Construction Costs", value: hardConstructionCosts.toFixed(2), isCurrency: true },
        { label: "Total Soft Costs", value: totalSoftCosts.toFixed(2), isCurrency: true },
        { label: "Construction Period Interest", value: constructionInterest.toFixed(2), isCurrency: true },
        { label: "Total Development Cost", value: totalDevelopmentCost.toFixed(2), isCurrency: true },
        { label: "Cost per Square Foot", value: costPerSF.toFixed(2), isCurrency: true },
        { label: "Annual Gross Rent", value: annualGrossRent.toFixed(2), isCurrency: true },
        { label: "Net Operating Income (NOI)", value: noi.toFixed(2), isCurrency: true },
        { label: "Permanent Loan Amount", value: permanentLoanAmount.toFixed(2), isCurrency: true },
        { label: "Annual Debt Service", value: annualDebtService.toFixed(2), isCurrency: true },
        { label: "Annual Cash Flow", value: annualCashFlow.toFixed(2), isCurrency: true },
        { label: "Development Yield on Cost", value: `${developmentYield.toFixed(2)}%`, isCurrency: false },
        { label: "Cash-on-Cash Return", value: `${cashOnCashReturn.toFixed(2)}%`, isCurrency: false },
        { label: "Stabilized Value (at market cap rate 7%)", value: stabilizedValue.toFixed(2), isCurrency: true },
        { label: "Profit on Cost", value: `${profitOnCost.toFixed(2)}%`, isCurrency: false },
      ];
    },
  },
};
