import { CalculatorContent } from '@/types';

export const COLLEGE_SAVINGS_VS_RENTAL_PROPERTY_CALCULATOR_CONTENT: CalculatorContent = {
  title: 'College Savings (529) vs. Rental Property Calculator',
  description: 'Compare 529 college savings plans with rental property investment for funding education. Analyze returns, tax benefits, and flexibility.',
  icon: 'Icon',
  category: 'Investment Analysis',
  slug: 'college-savings-vs-rental-property-calculator',
  metaTitle: '529 Plan vs Rental Property for College - Best Education Investment Strategy',
  metaDescription: 'Should you save for college in a 529 plan or buy rental property? Compare tax benefits, returns, financial aid impact, and flexibility to maximize education funding.',
  article: {
    title: "529 vs. Rental Property: The Best Way to Save for College",
    content: `
    <h2>Two Completely Different Paths to College Funding</h2>
    <p>Parents face a crucial decision: save for college through a tax-advantaged 529 plan, or invest in rental property and use cash flow or sale proceeds for tuition. Each approach has distinct advantages and risks.</p>
    
    <h3>Quick Comparison</h3>
    <table>
      <tr>
        <th>Factor</th>
        <th>529 Plan</th>
        <th>Rental Property</th>
      </tr>
      <tr>
        <td>Minimum Investment</td>
        <td>$25-$50</td>
        <td>$30,000-$100,000</td>
      </tr>
      <tr>
        <td>Tax-Free Growth?</td>
        <td>Yes (for education)</td>
        <td>No (taxed annually)</td>
      </tr>
      <tr>
        <td>Tax-Free Withdrawals?</td>
        <td>Yes (for education)</td>
        <td>No</td>
      </tr>
      <tr>
        <td>Financial Aid Impact</td>
        <td>5.64% of value counts</td>
        <td>Depends (can be shielded)</td>
      </tr>
      <tr>
        <td>Flexibility (non-education)</td>
        <td>10% penalty + taxes</td>
        <td>Full flexibility</td>
      </tr>
      <tr>
        <td>Expected Return</td>
        <td>6-8% (stock-based)</td>
        <td>8-12% (with leverage)</td>
      </tr>
      <tr>
        <td>Liquidity</td>
        <td>High (sell anytime)</td>
        <td>Low (months to sell)</td>
      </tr>
      <tr>
        <td>Time Required</td>
        <td>1 hour/year</td>
        <td>10+ hours/month</td>
      </tr>
    </table>
    
    <h3>529 College Savings Plan Deep Dive</h3>
    
    <h4>How 529 Plans Work</h4>
    <p>529 plans are state-sponsored investment accounts with special tax treatment. You contribute after-tax dollars, investments grow tax-free, and withdrawals are tax-free when used for qualified education expenses.</p>
    
    <h4>529 Tax Benefits</h4>
    <ul>
      <li><strong>Federal:</strong> Tax-free growth and withdrawals (no federal deduction for contributions)</li>
      <li><strong>State:</strong> 30+ states offer income tax deductions or credits (up to $10,000/year in some states)</li>
      <li><strong>Gift Tax:</strong> Can superfund 5 years at once ($90,000 single, $180,000 married) without gift tax</li>
      <li><strong>Estate Planning:</strong> Contributions removed from taxable estate, but donor retains control</li>
    </ul>
    
    <h4>Qualified Education Expenses</h4>
    <ul>
      <li>Tuition and fees</li>
      <li>Room and board (on-campus or off-campus up to COA limit)</li>
      <li>Books and supplies</li>
      <li>Computers and internet</li>
      <li>Up to $10,000/year for K-12 tuition</li>
      <li>Up to $10,000 total for student loan repayment</li>
    </ul>
    
    <h4>529 Plan Advantages</h4>
    <ul>
      <li><strong>Tax-Free Compounding:</strong> $10,000/year for 18 years at 7% = $379,932 (vs. $344,000 in taxable account)</li>
      <li><strong>Low Minimums:</strong> Start with as little as $25</li>
      <li><strong>Set-It-Forget-It:</strong> Auto-invest from checking account, age-based portfolios rebalance automatically</li>
      <li><strong>Financial Aid Treatment:</strong> Parent-owned 529 only counts 5.64% toward EFC (vs. 20% for student assets)</li>
      <li><strong>Change Beneficiaries:</strong> Transfer to sibling, cousin, even yourself for grad school</li>
      <li><strong>Creditor Protection:</strong> Most states shield 529 plans from creditors</li>
      <li><strong>No Income Limits:</strong> Unlike Coverdell ESAs, anyone can contribute regardless of income</li>
    </ul>
    
    <h4>529 Plan Disadvantages</h4>
    <ul>
      <li><strong>Education-Only:</strong> Non-qualified withdrawals incur 10% penalty + income tax on earnings</li>
      <li><strong>Limited Investment Control:</strong> Stuck with plan's investment options (usually 10-30 funds)</li>
      <li><strong>One Change Per Year:</strong> Can only change investments once annually (or when changing beneficiary)</li>
      <li><strong>Market Risk:</strong> 2022 saw 529 plans drop 15-25% (bad timing if college starts that year)</li>
      <li><strong>Over-Funding Risk:</strong> Leftover money faces penalties if not transferred or used for grad school</li>
      <li><strong>State Plan Limitations:</strong> Some states have high fees (0.5-1.5% annually) that eat returns</li>
    </ul>
    
    <h3>Rental Property for College Funding Deep Dive</h3>
    
    <h4>The Rental Property Strategy</h4>
    <p>Buy a rental property when child is young, use monthly cash flow to fund 529 or pay tuition directly, or sell property when college starts and use proceeds for 4 years of expenses.</p>
    
    <h4>Rental Property Advantages</h4>
    <ul>
      <li><strong>Leverage Amplifies Returns:</strong> 20% down on $300k property = $60k investment controlling $300k asset</li>
      <li><strong>Multiple Profit Streams:</strong> Cash flow + appreciation + loan paydown</li>
      <li><strong>Tax Deductions:</strong> Mortgage interest, depreciation ($10,909/year on $300k building), repairs, property taxes</li>
      <li><strong>Inflation Hedge:</strong> Rents and property values rise with inflation</li>
      <li><strong>Full Flexibility:</strong> Can sell or keep property even if child doesn't attend college</li>
      <li><strong>Potential Scholarship Bonus:</strong> Property not counted by FAFSA if in LLC or irrevocable trust</li>
      <li><strong>Long-Term Wealth:</strong> Property continues generating income after college</li>
    </ul>
    
    <h4>Rental Property Disadvantages</h4>
    <ul>
      <li><strong>High Entry Barrier:</strong> Need $30,000-$100,000 for down payment + reserves</li>
      <li><strong>Illiquid:</strong> Can't quickly sell if tuition is due in 3 months</li>
      <li><strong>Landlord Hassles:</strong> Tenant calls, maintenance emergencies, evictions</li>
      <li><strong>Vacancy Risk:</strong> 1-2 months vacant per year = lost cash flow</li>
      <li><strong>Market Timing Risk:</strong> Property values could drop right when you need to sell for tuition</li>
      <li><strong>No Tax-Free Status:</strong> Rental income taxed annually, capital gains on sale</li>
      <li><strong>Time Intensive:</strong> 10+ hours/month managing property vs. 10 minutes/month for 529</li>
    </ul>
    
    <h3>The Math: 18 Years of Saving</h3>
    
    <h4>Scenario 1: 529 Plan Monthly Contributions</h4>
    <ul>
      <li>Contribution: $500/month for 18 years</li>
      <li>Return: 7% annually (stock-based portfolio)</li>
      <li>Total Contributions: $108,000</li>
      <li>Final Value: $198,891</li>
      <li>Tax Savings: ~$18,000 (state deduction) + $0 on withdrawals</li>
    </ul>
    
    <h4>Scenario 2: Rental Property</h4>
    <ul>
      <li>Purchase Price: $300,000 (20% down = $60,000)</li>
      <li>Monthly Rent: $2,400</li>
      <li>Monthly Expenses: $1,900 (mortgage, tax, insurance, maintenance)</li>
      <li>Cash Flow: $500/month √ó 18 years = $108,000</li>
      <li>Appreciation: 4%/year ‚Üí property worth $614,000 in 18 years</li>
      <li>Loan Paydown: $140,000 paid off</li>
      <li>Net Proceeds if Sold: $614,000 - $100,000 (remaining loan) - $49,000 (selling costs) = $465,000</li>
      <li>Total Available for College: $465,000</li>
    </ul>
    
    <p><strong>Winner: Rental property</strong> (2.3√ó more money), BUT requires 180√ó more time investment and 6√ó more capital upfront.</p>
    
    <h3>Financial Aid Considerations (Critical!)</h3>
    
    <h4>How Assets Affect Expected Family Contribution (EFC)</h4>
    <table>
      <tr>
        <th>Asset Type</th>
        <th>Impact on EFC</th>
        <th>Annual Financial Aid Reduction</th>
      </tr>
      <tr>
        <td>Parent-Owned 529</td>
        <td>5.64% of value</td>
        <td>$2,820/year (on $50k 529)</td>
      </tr>
      <tr>
        <td>Student-Owned UTMA</td>
        <td>20% of value</td>
        <td>$10,000/year (on $50k account)</td>
      </tr>
      <tr>
        <td>Parent Real Estate (disclosed)</td>
        <td>5.64% of equity</td>
        <td>$2,820/year (on $50k equity)</td>
      </tr>
      <tr>
        <td>Rental in LLC/Trust</td>
        <td>0% (may not need to report)</td>
        <td>$0</td>
      </tr>
      <tr>
        <td>Primary Residence</td>
        <td>0% (exempt)</td>
        <td>$0</td>
      </tr>
    </table>
    
    <h4>The Rental Property FAFSA Loophole</h4>
    <p>FAFSA asks for "investment real estate net worth," but properties owned by business entities (LLC, S-Corp with <100 employees, family farm) may not need to be reported. Consult FAFSA rules and financial aid advisor.</p>
    
    <h3>Hybrid Strategy: Best of Both Worlds</h3>
    
    <h4>Strategy 1: Rental Property + 529 Contributions</h4>
    <ul>
      <li>Buy rental property with $60k down payment</li>
      <li>Use $500/month cash flow to fund child's 529 plan</li>
      <li>Benefits: 529 tax-free growth + rental appreciation + loan paydown</li>
      <li>At college time: Use 529 for tuition, keep rental for ongoing income</li>
    </ul>
    
    <h4>Strategy 2: College House Hack</h4>
    <ul>
      <li>Buy 3-4 bedroom house/condo near college 2 years before enrollment</li>
      <li>Child lives there, rents out extra rooms to roommates</li>
      <li>Roommate rent covers mortgage + expenses</li>
      <li>Child lives rent-free (saves $10k-$15k/year)</li>
      <li>Sell after graduation, use proceeds for grad school or keep as rental</li>
    </ul>
    
    <h4>Strategy 3: The Roth IRA Backdoor</h4>
    <ul>
      <li>Contribute to Roth IRA instead of 529 ($6,500/year)</li>
      <li>Contributions (not earnings) can be withdrawn tax/penalty-free for any purpose</li>
      <li>If child gets scholarship: Keep money for retirement instead</li>
      <li>Roth IRAs NOT counted on FAFSA</li>
    </ul>
    
    <h3>When Child Gets Scholarship: What Happens?</h3>
    
    <h4>529 Plan</h4>
    <ul>
      <li>Can withdraw scholarship amount without 10% penalty (still pay income tax on earnings)</li>
      <li>Transfer 529 to younger sibling</li>
      <li>Keep invested for child's grad school</li>
      <li>Transfer to yourself for continuing education</li>
      <li>New SECURE 2.0 Rule: Roll up to $35,000 to Roth IRA (lifetime limit, if 529 open 15+ years)</li>
    </ul>
    
    <h4>Rental Property</h4>
    <ul>
      <li>Keep property and continue building wealth</li>
      <li>Use cash flow for child's living expenses, car, internships</li>
      <li>Give property to child (great start on wealth building)</li>
      <li>No penalty, no restrictions‚Äîfull flexibility</li>
    </ul>
    
    <h3>State-Specific 529 Benefits to Consider</h3>
    <p><strong>Top State Tax Deductions:</strong></p>
    <ul>
      <li>Colorado: Full deduction (no limit)</li>
      <li>New Mexico: Full deduction (no limit)</li>
      <li>South Carolina: Full deduction (no limit)</li>
      <li>West Virginia: Full deduction (no limit)</li>
      <li>Indiana: $1,000 credit (20% of up to $5,000 contribution)</li>
    </ul>
    <p>If your state offers a generous deduction, 529 becomes significantly more attractive.</p>
    
    <h3>The Forgotten Option: Cash Value Life Insurance</h3>
    <p>Some advisors recommend whole life or indexed universal life (IUL) for college savings:</p>
    <ul>
      <li><strong>Pro:</strong> Not counted on FAFSA, tax-free loans, death benefit protects family</li>
      <li><strong>Con:</strong> High fees (1-3%), low returns (3-5%), complex, better alternatives exist</li>
      <li><strong>Verdict:</strong> Generally not recommended unless you need life insurance anyway</li>
    </ul>
  `,
  },
  calculator: {
    fields: [
      {
        name: "childAge",
        label: "Child's Current Age",
        type: "number",
        placeholder: "5",
        defaultValue: "5",
      },
      {
        name: "monthlyContribution",
        label: "Monthly Amount to Invest",
        type: "number",
        placeholder: "500",
        defaultValue: "500",
      },
      {
        name: "stateDeduction",
        label: "State 529 Tax Deduction/Credit ($)",
        type: "number",
        placeholder: "0",
        defaultValue: "0",
      },
      {
        name: "propertyPrice",
        label: "Rental Property Purchase Price",
        type: "number",
        placeholder: "300000",
        defaultValue: "300000",
      },
      {
        name: "downPayment",
        label: "Down Payment (%)",
        type: "number",
        placeholder: "20",
        defaultValue: "20",
      },
      {
        name: "monthlyRent",
        label: "Monthly Rental Income",
        type: "number",
        placeholder: "2400",
        defaultValue: "2400",
      },
      {
        name: "propertyExpenses",
        label: "Monthly Property Expenses (all-in)",
        type: "number",
        placeholder: "1900",
        defaultValue: "1900",
      },
      {
        name: "propertyAppreciation",
        label: "Property Appreciation Rate (%)",
        type: "number",
        placeholder: "4",
        defaultValue: "4",
      },
      {
        name: "stockReturn",
        label: "529 Expected Return (%)",
        type: "number",
        placeholder: "7",
        defaultValue: "7",
      },
    ],
    results: [
      { label: "Years Until College (age 18)", isCurrency: false },
      { label: "529 Plan: Total Contributions", isCurrency: true },
      { label: "529 Plan: Final Value at Age 18", isCurrency: true },
      { label: "529 Plan: State Tax Savings", isCurrency: true },
      { label: "Rental: Down Payment Required", isCurrency: true },
      { label: "Rental: Total Cash Flow Over Years", isCurrency: true },
      { label: "Rental: Property Value at Age 18", isCurrency: true },
      { label: "Rental: Net Proceeds if Sold", isCurrency: true },
      { label: "Rental: Total Return (Cash Flow + Equity)", isCurrency: true },
      { label: "Winner (Most Money at College)", isCurrency: false },
      { label: "Advantage Amount", isCurrency: true },
    ],
    calculate: (data: any) => {
      const childAge = Number(data.childAge) || 0;
      const monthlyContribution = Number(data.monthlyContribution) || 0;
      const stateDeduction = Number(data.stateDeduction) || 0;
      const propertyPrice = Number(data.propertyPrice) || 0;
      const downPaymentPercent = Number(data.downPayment) / 100 || 0;
      const monthlyRent = Number(data.monthlyRent) || 0;
      const propertyExpenses = Number(data.propertyExpenses) || 0;
      const propertyAppreciation = Number(data.propertyAppreciation) / 100 || 0;
      const stockReturn = Number(data.stockReturn) / 100 || 0;
      
      const yearsUntilCollege = Math.max(0, 18 - childAge);
      const months = yearsUntilCollege * 12;
      
      // 529 Calculation
      const monthlyRate = stockReturn / 12;
      const total529Contributions = monthlyContribution * months;
      const plan529Value = monthlyContribution * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate) * (1 + monthlyRate);
      const stateTaxSavings = stateDeduction * yearsUntilCollege;
      
      // Rental Property Calculation
      const downPaymentAmount = propertyPrice * downPaymentPercent;
      const monthlyCashFlow = monthlyRent - propertyExpenses;
      const totalCashFlow = monthlyCashFlow * months;
      const futurePropertyValue = propertyPrice * Math.pow(1 + propertyAppreciation, yearsUntilCollege);
      
      // Simplified mortgage calculation (assume 30-year at 7%)
      const loanAmount = propertyPrice - downPaymentAmount;
      const monthlyInterestRate = 0.07 / 12;
      const loanMonths = 360;
      const monthlyPayment = loanAmount * (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, loanMonths)) / (Math.pow(1 + monthlyInterestRate, loanMonths) - 1);
      
      // Loan balance after years
      const paymentsApplied = months;
      const loanBalance = loanAmount * (Math.pow(1 + monthlyInterestRate, loanMonths) - Math.pow(1 + monthlyInterestRate, paymentsApplied)) / (Math.pow(1 + monthlyInterestRate, loanMonths) - 1);
      
      const equity = futurePropertyValue - loanBalance;
      const sellingCosts = futurePropertyValue * 0.08;
      const netProceeds = equity - sellingCosts;
      const totalRentalReturn = totalCashFlow + netProceeds;
      
      // Winner determination
      const total529 = plan529Value + stateTaxSavings;
      let winner = "";
      let advantage = 0;
      
      if (total529 > totalRentalReturn) {
        winner = "529 Plan Wins üèÜ";
        advantage = total529 - totalRentalReturn;
      } else {
        winner = "Rental Property Wins üèÜ";
        advantage = totalRentalReturn - total529;
      }

      return [
        { label: "Years Until College (age 18)", value: yearsUntilCollege.toFixed(0), isCurrency: false },
        { label: "529 Plan: Total Contributions", value: total529Contributions.toFixed(2), isCurrency: true },
        { label: "529 Plan: Final Value at Age 18", value: plan529Value.toFixed(2), isCurrency: true },
        { label: "529 Plan: State Tax Savings", value: stateTaxSavings.toFixed(2), isCurrency: true },
        { label: "Rental: Down Payment Required", value: downPaymentAmount.toFixed(2), isCurrency: true },
        { label: "Rental: Total Cash Flow Over Years", value: totalCashFlow.toFixed(2), isCurrency: true },
        { label: "Rental: Property Value at Age 18", value: futurePropertyValue.toFixed(2), isCurrency: true },
        { label: "Rental: Net Proceeds if Sold", value: netProceeds.toFixed(2), isCurrency: true },
        { label: "Rental: Total Return (Cash Flow + Equity)", value: totalRentalReturn.toFixed(2), isCurrency: true },
        { label: "Winner (Most Money at College)", value: winner, isCurrency: false },
        { label: "Advantage Amount", value: advantage.toFixed(2), isCurrency: true },
      ];
    },
  },
};
